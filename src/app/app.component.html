<form [formGroup]="form" (ngSubmit)="onSubmit(form.value)" class="form-horizontal">
	<div class="container">
		<p class="heading text-center">User Directory</p>
		<button type="button" (click)="addUser()">New User</button>
		<button type="submit" >submit</button>
  </div>
  <div formArrayName="user">
    <div class="container user-container"  *ngFor="let user of form.controls.user.controls; let i = index" formGroupName="{{i}}">
      <div class="row">
        <div class="col-8">
          Name
          <input formControlName="name" placeholder="Name">
        </div>
        <div class="col-4 text-right">
          <button *ngIf="form.controls.user.controls.length > 1" type="button" (click)="deleteUser(i)">Delete</button>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-8">
          Phones
        </div>
      </div>
      <div class="row" formArrayName="phones">
        <div class="col-6" *ngFor="let phone of user.controls.phones.controls; let j = index" formGroupName="{{j}}">
          <div class="container user-container">
            <div class="row">
              <div class="col-8">
                <input formControlName="phone" placeholder="Phone">
              </div>
              <div class="col-4 text-right">
                <button *ngIf="user.controls.phones.controls.length > 1" type="button" (click)="deletePhone(i,j)">Delete</button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-6 text-center">
          <button type="button" (click)="addPhone(i)">Add New</button>
        </div>
      </div>
    </div>
  </div>
</form>